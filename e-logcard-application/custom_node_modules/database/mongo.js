'use strict';
let config=require('config');
let logcardDb;
exports.init=function init(){
	return new Promise(function(resolve, reject) {
		console.log("Initialisation de la connexion a la base de donnees");
		let mongoClient = require("mongodb").MongoClient;
		let dbConfig=config.get("database");
		mongoClient.connect(dbConfig.url).then(function (db) { 
			console.log("Fin de de l initialisation connexion a la base de donnees");
			exports.database=db;
			logcardDb=db;
			resolve();
		});
		
	});	
};


process.on('exit', function() {
	console.log("Fermeture de la connexion a la base de donnees des users");
	logcardDb.close();
});

